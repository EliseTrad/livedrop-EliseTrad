// Intent classifier logic for 7 required intents
// Intents: policy_question, order_status, product_search, complaint, chitchat, off_topic, violation

const INTENTS = [
  {
    name: 'policy_question',
    keywords: [
      'policy',
      'return',
      'refund',
      'exchange',
      'shipping',
      'warranty',
      'privacy',
      'security',
      'guarantee',
      'delivery',
      'cancel',
      'replace',
      'lost',
      'damaged',
      'how long',
      'when will',
      'where is',
      'can I return',
      'can I get a refund',
    ],
  },
  {
    name: 'order_status',
    keywords: [
      'order status',
      'track order',
      'where is my order',
      'order number',
      'order id',
      'shipped',
      'delivered',
      'pending',
      'processing',
      'order update',
      'order arrived',
      'order shipped',
      'order delivered',
      'order tracking',
      'my order',
    ],
  },
  {
    name: 'product_search',
    keywords: [
      'find',
      'search',
      'show me',
      'do you have',
      'available',
      'in stock',
      'catalog',
      'products',
      'browse',
      'looking for',
      'price',
      'cost',
      'how much',
      'category',
      'filter',
      'sort',
      'list',
    ],
  },
  {
    name: 'complaint',
    keywords: [
      'complain',
      'not happy',
      'unhappy',
      'bad',
      'problem',
      'issue',
      'does not work',
      'broken',
      'late',
      'missing',
      'wrong',
      'disappointed',
      'angry',
      'frustrated',
      'upset',
      'terrible',
      'worst',
      'never again',
      'unacceptable',
      'refund me',
      'return this',
      'cancel my order',
    ],
  },
  {
    name: 'chitchat',
    keywords: [
      'hello',
      'hi',
      'hey',
      'how are you',
      'good morning',
      'good evening',
      'good afternoon',
      "what's up",
      'who are you',
      'your name',
      'tell me about yourself',
      'thank you',
      'thanks',
      'bye',
      'goodbye',
      'see you',
      'nice to meet you',
      'how is your day',
      'how old are you',
      'where are you from',
      'who created you',
      'are you a robot',
      'are you real',
    ],
  },
  {
    name: 'off_topic',
    keywords: [
      'weather',
      'joke',
      'movie',
      'music',
      'song',
      'game',
      'sports',
      'politics',
      'president',
      'government',
      'school',
      'university',
      'exam',
      'test',
      'homework',
      'assignment',
      'random',
      'unrelated',
      'not about shopping',
      'not about order',
      'not about product',
    ],
  },
  {
    name: 'violation',
    keywords: [
      'stupid',
      'idiot',
      'hate you',
      'kill',
      'die',
      'racist',
      'sexist',
      'offensive',
      'swear',
      'curse',
      'bad word',
      'abuse',
      'harass',
      'threat',
      'violence',
      'attack',
      'insult',
      'dumb',
      'shut up',
      'shut your mouth',
      'fool',
      'moron',
      'bastard',
      'screw you',
      'f***',
      'a**hole',
      'b****',
      'c***',
      'n****',
      'slur',
      'go to hell',
    ],
  },
];

function classifyIntent(text) {
  const lower = text.toLowerCase();
  for (const intent of INTENTS) {
    for (const kw of intent.keywords) {
      if (lower.includes(kw)) {
        return intent.name;
      }
    }
  }
  // Default fallback
  return 'product_search';
}

module.exports = {
  classifyIntent,
  INTENTS,
};
